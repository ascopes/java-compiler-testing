name: Build main branch
on:
  push:
    branches: [ main ]

jobs:
  tests:
    name: Tests
    uses: ./.github/workflows/_run-tests.yml
  javadocs:
    name: JavaDocs
    uses: ./.github/workflows/_generate-javadocs.yml
  compliance:
    name: Compliance
    uses: ./.github/workflows/_check-compliance.yml
  publish-snapshot:
    name: Publish Snapshot
    needs: [ compliance, javadocs, tests ]
    uses: ./.github/workflows/_publish_snapshot.yml
    secrets: inherit
